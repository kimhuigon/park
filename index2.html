<body>
  <div id="map" style="width:500px;height:400px; margin-left: 50%; transform: translateX(-50%); margin-top: 100px;">
  </div>
  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=41ce8b9519ec9b48b457759b6dff0a54"></script>
  <script>
    get(); // 호이스팅 hoisting

    async function get() {
      const url = 'parkdata.json';
      //    response  result
      const res = await fetch(url);
      const data = await res.json(); // res.json();
      const list = data.records;
      console.log(list);
      list.forEach((v) => {
        const name = v.공원명;
        const address = v.소재지지번주소;
        const lat = v.위도;
        const lan = v.경도;
        console.log(`${name} : ${address} \n${lat}, ${lan}`);
      });
    }

    navigator.geolocation.getCurrentPosition((pos) => {
      const lat = pos.coords.latitude;
      const lng = pos.coords.longitude;
      const container = document.getElementById('map');
      const options = {
        center: new kakao.maps.LatLng(lat, lng),
        level: 3
      };

      const map = new kakao.maps.Map(container, options);

      const markerPosition = new kakao.maps.LatLng(lat, lng);

      // 마커를 생성합니다
      const marker = new kakao.maps.Marker({
        position: markerPosition
      });

      // 마커가 지도 위에 표시되도록 설정합니다
      marker.setMap(map);
    });
    
  </script>
</body>

